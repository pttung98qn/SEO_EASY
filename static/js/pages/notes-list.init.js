var editorData,url="/static/json/",allNotesList="",currentPage=1,itemsPerPage=8,prevButton=document.getElementById("page-prev"),nextButton=document.getElementById("page-next"),ckClassicEditor=document.getElementById("ckeditor-classic"),getJSON=(ckClassicEditor&&ClassicEditor.create(ckClassicEditor).then(function(t){(editorData=t).ui.view.editable.element.style.height="200px",document.getElementById("addNewNote").addEventListener("hidden.bs.modal",e=>{t.setData("")}),editItem(t)}).catch(function(e){console.error(e)}),function(e,t){var a=new XMLHttpRequest;a.open("GET",url+e,!0),a.responseType="json",a.onload=function(){var e=a.status;t(200===e?null:e,a.response)},a.send()}),noteTitleInput=(getJSON("notes-list.json",function(e,t){null!==e?console.log("Something went wrong: "+e):(loadNotesData(allNotesList=t,currentPage),paginationEvents(),sortElementsById())}),document.getElementById("noteTitle-input")),categoryInput=document.getElementById("category-input"),noteAuthor=document.getElementById("noteAuthor-input"),categoryVal=new Choices(categoryInput,{searchEnabled:!1});function loadNotesData(e,t){pageEvent(e);var a=Math.ceil(e.length/itemsPerPage);if(a<(t=t<1?1:t)&&(t=a),document.querySelector("#notes-list").innerHTML="",0<e.length)for(var i=(t-1)*itemsPerPage;i<t*itemsPerPage&&i<e.length;i++){var n=null!=e[i].lock?"<i class='bi bi-lock'></i>":"";document.querySelector("#notes-list").innerHTML+='<div class="col-xl-3 col-lg-4 col-sm-6">        <div class="card card-height-100">            <div class="card-body d-flex flex-column">                <div class="d-flex align-items-center gap-2 mb-3">                    '+isCategory(e[i].category)+'                    <div class="flex-shrink-0 text-muted">                        '+n+'                    </div>                </div>                <h5 class="card-title">'+e[i].title+'</h5>                <div class="text-muted">'+e[i].description+'</div>                 <div class="d-flex align-items-center gap-2 mt-auto">                    <img src="'+e[i].author[0].img+'" alt="" class="avatar-xs rounded-circle">                    <div class="flex-grow-1">                        <a href="#!"><h6 class="mb-1 fs-sm">'+e[i].author[0].name+'</h6></a>                        <p class="text-muted fs-xs fw-normal mb-0">'+e[i].date+'</p>                    </div>                    <div class="flex-shrink-0">                        <div class="dropdown">                            <button class="btn btn-subtle-secondary btn-sm dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">                                <i class="ri-more-fill align-middle"></i>                            </button>                            <ul class="dropdown-menu dropdown-menu-end">                                <li><a class="dropdown-item view-item-btn" href="javascript:void(0);"><i class="ri-eye-fill align-bottom me-2 text-muted"></i> View</a></li>                                <li><a class="dropdown-item edit-item-btn" data-edit-id="'+e[i].id+'" data-bs-toggle="modal" href="#addNewNote"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i> Edit</a></li>                                <li><a class="dropdown-item remove-item-btn" data-remove-id="'+e[i].id+'" data-bs-toggle="modal" href="#removeNotesModal"><i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i> Delete</a></li>                            </ul>                        </div>                    </div>                </div>            </div>        </div>    </div>'}selectedPage(),1==currentPage?prevButton.parentNode.classList.add("disabled"):prevButton.parentNode.classList.remove("disabled"),currentPage==a?nextButton.parentNode.classList.add("disabled"):nextButton.parentNode.classList.remove("disabled"),editItem(),removeItem()}function isCategory(e){switch(e){case"Management":return'<div class="flex-grow-1 text-danger"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>";case"Skills":return'<div class="flex-grow-1 text-success"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>";case"Ideas":return'<div class="flex-grow-1 text-warning"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>";case"Prototyping":return'<div class="flex-grow-1 text-primary"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>";case"Global":return'<div class="flex-grow-1 text-secondary"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>";case"Development":return'<div class="flex-grow-1 text-info"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>";case"UI UX Design":return'<div class="flex-grow-1 text-success"><i class="bi bi-circle align-baseline me-1 fs-xs"></i>'+e+"</div>"}}var forms=document.querySelectorAll(".create-form"),cnt=11;function selectedPage(){for(var e=document.getElementById("page-num").getElementsByClassName("clickPageNumber"),t=0;t<e.length;t++)t==currentPage-1?e[t].parentNode.classList.add("active"):e[t].parentNode.classList.remove("active")}function pageEvent(e){0==e.length?document.getElementById("pagination-element").style.display="none":document.getElementById("pagination-element").style.display="flex";for(var t=document.getElementById("page-num"),a=(t.innerHTML="",Math.ceil(e.length/itemsPerPage)),i=1;i<a+1;i++)t.innerHTML+="<div class='page-item'><a class='page-link clickPageNumber' href='javascript:void(0);'>"+i+"</a></div>"}function paginationEvents(){function e(){return Math.ceil(allNotesList.length/itemsPerPage)}prevButton.addEventListener("click",function(){1<currentPage&&loadNotesData(allNotesList,--currentPage)}),nextButton.addEventListener("click",function(){currentPage<e()&&loadNotesData(allNotesList,++currentPage)});var t=document.getElementById("page-num");t.innerHTML="";for(var a=1;a<e()+1;a++)t.innerHTML+="<div class='page-item'><a class='page-link clickPageNumber' href='javascript:void(0);'>"+a+"</a></div>";document.addEventListener("click",function(e){"A"==e.target.nodeName&&e.target.classList.contains("clickPageNumber")&&(currentPage=e.target.textContent,loadNotesData(allNotesList,currentPage))}),selectedPage()}function fetchIdFromObj(e){return parseInt(e.id)}function findNextId(){var e,t;return 0===allNotesList.length?0:(e=fetchIdFromObj(allNotesList[allNotesList.length-1]))<=(t=fetchIdFromObj(allNotesList[0]))?t+1:e+1}function sortElementsById(){loadNotesData(allNotesList.sort(function(e,t){e=fetchIdFromObj(e),t=fetchIdFromObj(t);return t<e?-1:e<t?1:0}),currentPage)}function editItem(){var a;(new Date).toUTCString().slice(5,16);Array.from(document.querySelectorAll(".edit-item-btn")).forEach(function(t){t.addEventListener("click",function(e){a=t.getAttribute("data-edit-id"),allNotesList=allNotesList.map(function(e){return e.id==a&&(editList=!0,document.getElementById("addNewNoteLabel").innerHTML="Edit Notes",document.getElementById("noteAuthor-input").value=e.author[0].name,document.getElementById("noteTitle-input").value=e.title,document.getElementById("category-input").value=e.category,document.getElementById("ckeditor-classic").value=editorData.setData(e.description),document.getElementById("addNew").innerHTML="Update",document.getElementById("action").value="edit",document.getElementById("id").value=a),e})})})}function removeItem(){var i;Array.from(document.querySelectorAll(".remove-item-btn")).forEach(function(a){a.addEventListener("click",function(e){document.getElementById("remove-notes").addEventListener("click",function(){var t;i=a.getAttribute("data-remove-id"),t=i,allNotesList=allNotesList.filter(function(e){return e.id!=t}),document.getElementById("close-removeNotesModal").click(),loadNotesData(allNotesList,1)})})})}function clearFields(){document.getElementById("id-field").value="",document.getElementById("addNewNoteLabel").innerHTML="Create Note",document.getElementById("addNew").innerHTML="Add notes",noteTitleInput.value="",categoryInput.value="",noteAuthor.value="",categoryVal&&categoryVal.destroy(),categoryVal=new Choices(categoryInput,{searchEnabled:!1})}Array.prototype.slice.call(forms).forEach(function(e){e.addEventListener("submit",function(e){var t=document.getElementById("action").value,a=document.getElementById("id").value;if(e.preventDefault(),"edit"!=t){var i=document.getElementById("alert-error-msg");if(i.classList.remove("d-none"),setTimeout(()=>i.classList.add("d-none"),2e3),""==noteTitleInput.value)return text="Please enter a note title",i.innerHTML=text,!1;if(""==categoryInput.value)return text="Please select a category",i.innerHTML=text,!1;document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("notesModal-close").click();e=(new Date).toUTCString().slice(5,16);return document.querySelector("#notes-list").innerHTML+='<div class="col-xl-3 col-lg-4 col-sm-6">        <div class="card card-height-100">            <div class="card-body d-flex flex-column">                <div class="d-flex align-items-center gap-2 mb-3">                    '+isCategory(categoryInput.value)+'                    <div class="flex-shrink-0 text-muted">                        <i class=\'bi bi-lock\'></i>                    </div>                </div>                <h5 class="card-title">'+noteTitleInput.value+'</h5>                <div class="text-muted">'+editorData.getData()+'</div>                 <div class="d-flex align-items-center gap-2 mt-auto">                    <img src="https://img.themesbrand.com/judia/users/avatar-3.jpg" alt="" class="avatar-xs rounded-circle">                    <div class="flex-grow-1">                        <a href="#!"><h6 class="mb-1 fs-sm">'+noteAuthor.value+'</h6></a>                        <p class="text-muted fs-xs fw-normal mb-0">'+e+'</p>                    </div>                    <div class="flex-shrink-0">                        <div class="dropdown">                            <button class="btn btn-subtle-secondary btn-sm dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">                                <i class="ri-more-fill align-middle"></i>                            </button>                            <ul class="dropdown-menu dropdown-menu-end">                                <li><a class="dropdown-item view-item-btn" href="javascript:void(0);"><i class="ri-eye-fill align-bottom me-2 text-muted"></i> View</a></li>                                <li><a class="dropdown-item edit-item-btn" data-edit-id="'+cnt+'" data-bs-toggle="modal" href="#addNewNote"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i> Edit</a></li>                                <li><a class="dropdown-item remove-item-btn" data-remove-id="'+cnt+'" data-bs-toggle="modal" href="#removeNotesModal"><i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i> Delete</a></li>                            </ul>                        </div>                    </div>                </div>            </div>        </div>    </div>',allNotesList.unshift({id:cnt,category:categoryInput.value,title:noteTitleInput.value,description:editorData.getData(),author:[{img:"https://img.themesbrand.com/judia/users/avatar-3.jpg",name:noteAuthor.value}],date:e,lock:!1}),cnt++,loadNotesData(allNotesList,currentPage),!0}allNotesList=allNotesList.map(function(e){return e.id==a&&(editList=!0,e.author[0].name=noteAuthor.value,e.title=noteTitleInput.value,e.category=categoryInput.value,e.description=editorData.getData()),document.getElementById("notesModal-close").click(),document.getElementById("action").value="add",document.getElementById("addNewNoteLabel").innerHTML="Add Notes",document.getElementById("addNew").innerHTML="Save",loadNotesData(allNotesList,currentPage),e})})}),document.getElementById("addNewNote").addEventListener("hidden.bs.modal",e=>{clearFields()});