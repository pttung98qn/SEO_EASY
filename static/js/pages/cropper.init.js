function getRoundedCanvas(e){var t=document.createElement("canvas"),n=t.getContext("2d"),a=e.width,o=e.height;return t.width=a,t.height=o,n.imageSmoothingEnabled=!0,n.drawImage(e,0,0,a,o),n.globalCompositeOperation="destination-in",n.beginPath(),n.arc(a/2,o/2,Math.min(a,o)/2,0,2*Math.PI,!0),n.fill(),t}function each(e,t){for(var n=e.length,a=0;a<n;a++)t.call(e,e[a],a,e);return e}window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#ragbe_aspect_ratio"),o=1.5;new Cropper(e,{ready:function(){var e=this.cropper,t=e.getContainerData(),n=e.getCropBoxData(),a=n.width/n.height;(a<.5||o<a)&&(a=+n.height,e.setCropBoxData({left:(t.width-a)/2,width:a}))},cropmove:function(){var e=this.cropper,t=e.getCropBoxData(),n=t.width/t.height;n<.5?e.setCropBoxData({width:.5*t.height}):o<n&&e.setCropBoxData({width:t.height*o})}})}),window.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("crop_round_images"),t=document.getElementById("cropButtonResult"),n=document.getElementById("resultRoundImages"),a=!1,o=new Cropper(e,{aspectRatio:1,viewMode:1,ready:function(){a=!0}});t.onclick=function(){var e,t;a&&(e=getRoundedCanvas(o.getCroppedCanvas()),(t=document.createElement("img")).src=e.toDataURL(),n.innerHTML="",n.appendChild(t))}}),window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("#customizeImages"),n=document.querySelectorAll(".preview"),a=!1;new Cropper(e,{ready:function(){var t=this.cloneNode();t.className="",t.style.cssText="display: block;width: 100%;min-width: 0;min-height: 0;max-width: none;max-height: none;",each(n,function(e){e.appendChild(t.cloneNode())}),a=!0},crop:function(e){var o,i,r;a&&(o=e.detail,i=this.cropper.getImageData(),r=o.width/o.height,each(n,function(e){var t=e.getElementsByTagName("img").item(0),n=e.offsetWidth,a=o.width/n;e.style.height=n/r+"px",t.style.width=i.naturalWidth/a+"px",t.style.height=i.naturalHeight/a+"px",t.style.marginLeft=-o.x/a+"px",t.style.marginTop=-o.y/a+"px"}))}})});