var start_date=document.getElementById("event-start-date"),timepicker1=document.getElementById("timepicker1"),timepicker2=document.getElementById("timepicker2"),date=new Date,d=date.getDate(),m=date.getMonth(),y=date.getFullYear(),defaultEvents=[{id:1,title:"All Day Event",start:new Date(y,m,1),className:"bg-primary-subtle",location:"San Francisco, US",allDay:!0,extendedProps:{department:"All Day Event",category:"Business"},description:"An all-day event is an event that lasts an entire day or longer"},{id:2,title:"Visit Online Course",start:new Date(y,m,d-5),end:new Date(y,m,d-2),allDay:!0,className:"bg-warning-subtle",extendedProps:{department:"Long Event",category:"Business"},description:"Long Term Event means an incident that last longer than 12 hours."},{id:3,title:"Client Meeting with Alexis",start:new Date(y,m,d+22,20,0),end:new Date(y,m,d+24,16,0),allDay:!0,className:"bg-danger-subtle",location:"California, US",extendedProps:{department:"Meeting with Alexis",category:"Business"},description:"A meeting is a gathering of two or more people that has been convened for the purpose of achieving a common goal through verbal interaction, such as sharing information or reaching agreement."},{id:4,title:"Repeating Event",start:new Date(y,m,d+4,16,0),end:new Date(y,m,d+9,16,0),allDay:!0,className:"bg-primary-subtle",location:"Las Vegas, US",extendedProps:{department:"Repeating Event",category:"Holiday"},description:"A recurring or repeating event is simply any event that you will occur more than once on your calendar. "},{id:5,title:"Meeting With Designer",start:new Date(y,m,d,12,30),allDay:!0,className:"bg-success-subtle",location:"Head Office, US",extendedProps:{department:"Meeting",category:"Business"},description:"Tell how to boost website traffic"},{id:6,title:"Weekly Strategy Planning",start:new Date(y,m,d+9),end:new Date(y,m,d+11),allDay:!0,className:"bg-danger-subtle",location:"Head Office, US",extendedProps:{department:"Lunch",category:"Holiday"},description:"Strategies for Creating Your Weekly Schedule"},{id:7,title:"Birthday Party",start:new Date(y,m,d+1,19,0),allDay:!0,className:"bg-success-subtle",location:"Los Angeles, US",extendedProps:{department:"Birthday Party",category:"Family"},description:"Family slumber party â€“ Bring out the blankets and pillows and have a family slumber party! Play silly party games, share special snacks and wind down the fun with a special movie."},{id:8,title:"Click for Google",start:new Date(y,m,28),end:new Date(y,m,29),allDay:!0,url:"http://google.com/",className:"bg-dark-subtle",extendedProps:{department:"All Day Event",category:"Business"}},{id:9,title:"Steex Deadline",start:new Date(y,m,12),end:new Date(y,m,13),allDay:!0,className:"bg-danger-subtle",extendedProps:{department:"All Day Event",category:"Business"}},{id:10,title:"Meeting with Developer",start:new Date(y,m,12),end:new Date(y,m,13),allDay:!0,className:"bg-info-subtle",extendedProps:{department:"All Day Event",category:"Business"}},{id:11,title:"Personal Work",start:new Date(y,m,12),end:new Date(y,m,13),allDay:!0,className:"bg-primary-subtle",extendedProps:{department:"All Day Event",category:"Personal"}},{id:12,title:"Scrum Meeting",start:new Date(y,m,12),end:new Date(y,m,13),allDay:!0,className:"bg-dark-subtle",extendedProps:{department:"All Day Event",category:"Business"}},{id:13,title:"Hybrix Project",start:new Date(y,m,d+23,20,0),end:new Date(y,m,d+24,16,0),allDay:!0,className:"bg-info-subtle",location:"Head Office, US",extendedProps:{department:"Discussion",category:"Personal"},description:"Tell how to boost website traffic"}],addEvent=(flatPickrInit(),new bootstrap.Modal(document.getElementById("event-modal"),{keyboard:!1})),modalTitle=(document.getElementById("event-modal"),document.getElementById("modal-title")),formEvent=document.getElementById("form-event"),selectedEvent=null,forms=document.getElementsByClassName("needs-validation"),Draggable=FullCalendar.Draggable,externalEventContainerEl=document.getElementById("external-events"),calendarEl=(document.querySelector(".external-event")&&new Draggable(externalEventContainerEl,{itemSelector:".external-event",eventData:function(e){return{id:Math.floor(11e3*Math.random()),title:e.innerText,allDay:!0,start:new Date,className:e.getAttribute("data-class")}}}),document.getElementById("calendar"));function addNewEvent(e){document.getElementById("form-event").reset(),document.getElementById("btn-delete-event").setAttribute("hidden",!0),addEvent.show(),formEvent.classList.remove("was-validated"),formEvent.reset(),selectedEvent=null,modalTitle.innerText="Add Event",newEventData=e,document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)}function getInitialView(){return 768<=window.innerWidth&&window.innerWidth<1200?"timeGridWeek":window.innerWidth<=768?"listMonth":"dayGridMonth"}var eventCategoryChoice=new Choices("#event-category",{searchEnabled:!1}),calendar=new FullCalendar.Calendar(calendarEl,{timeZone:"local",editable:!0,droppable:!0,selectable:!0,navLinks:!0,locale:"en",direction:"ltr",dayMaxEvents:2,initialView:getInitialView(),themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"multiMonthYear,dayGridMonth,timeGridWeek,timeGridDay,listMonth"},windowResize:function(e){var t=getInitialView();calendar.changeView(t)},eventResize:function(t){var e=defaultEvents.findIndex(function(e){return e.id==t.event.id});defaultEvents[e]&&(defaultEvents[e].title=t.event.title,defaultEvents[e].start=t.event.start,defaultEvents[e].end=t.event.end||null,defaultEvents[e].allDay=t.event.allDay,defaultEvents[e].className=t.event.classNames[0],defaultEvents[e].description=t.event._def.extendedProps.description||"",defaultEvents[e].location=t.event._def.extendedProps.location||"")},eventClick:function(e){document.getElementById("edit-event-btn").removeAttribute("hidden"),document.getElementById("btn-save-event").setAttribute("hidden",!0),document.getElementById("edit-event-btn").setAttribute("data-id","edit-event"),document.getElementById("edit-event-btn").innerHTML="Edit",eventClicked(),flatPickrInit(),flatpicekrValueClear(),addEvent.show(),formEvent.reset(),selectedEvent=e.event,document.getElementById("modal-title").innerHTML="",document.getElementById("event-location-tag").innerHTML=void 0===selectedEvent.extendedProps.location?"No Location":selectedEvent.extendedProps.location,document.getElementById("event-description-tag").innerHTML=void 0===selectedEvent.extendedProps.description?"No Description":selectedEvent.extendedProps.description,document.getElementById("event-title").value=selectedEvent.title,document.getElementById("event-location").value=void 0===selectedEvent.extendedProps.location?"No Location":selectedEvent.extendedProps.location,document.getElementById("event-description").value=void 0===selectedEvent.extendedProps.description?"No Description":selectedEvent.extendedProps.description,document.getElementById("eventid").value=selectedEvent.id,selectedEvent.classNames[0]&&(eventCategoryChoice.destroy(),(eventCategoryChoice=new Choices("#event-category",{searchEnabled:!1})).setChoiceByValue(selectedEvent.classNames[0]));function t(e){var t=""+((e=new Date(e)).getMonth()+1),n=""+e.getDate();return[e.getFullYear(),t=t.length<2?"0"+t:t,n=n.length<2?"0"+n:n].join("-")}var e=selectedEvent.start,n=selectedEvent.end,d=null==n?str_dt(e):str_dt(e)+" to "+str_dt(n),e=null==n?t(e):t(e)+" to "+t(n),n=(flatpickr(start_date,{defaultDate:e,altInput:!0,altFormat:"j F Y",dateFormat:"Y-m-d",mode:"range",onChange:function(e,t){1<t.split("to").length?document.getElementById("event-time").setAttribute("hidden",!0):(document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-time").removeAttribute("hidden"))}}),document.getElementById("event-start-date-tag").innerHTML=d,getTime(selectedEvent.start)),e=getTime(selectedEvent.end);n==e?(document.getElementById("event-time").setAttribute("hidden",!0),flatpickr(document.getElementById("timepicker1"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}),flatpickr(document.getElementById("timepicker2"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i"})):(document.getElementById("event-time").removeAttribute("hidden"),flatpickr(document.getElementById("timepicker1"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:n}),flatpickr(document.getElementById("timepicker2"),{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:e}),document.getElementById("event-timepicker1-tag").innerHTML=tConvert(n),document.getElementById("event-timepicker2-tag").innerHTML=tConvert(e)),newEventData=null,modalTitle.innerText=selectedEvent.title,document.getElementById("btn-delete-event").removeAttribute("hidden")},dateClick:function(e){addNewEvent(e)},events:fetchEvents,eventReceive:function(e){e={id:parseInt(e.event.id),title:e.event.title,start:e.event.start,allDay:e.event.allDay,className:e.event.classNames[0]};defaultEvents.push(e)},eventDrop:function(t){var e=defaultEvents.findIndex(function(e){return e.id==t.event.id});defaultEvents[e]&&(defaultEvents[e].title=t.event.title,defaultEvents[e].start=t.event.start,defaultEvents[e].end=t.event.end||null,defaultEvents[e].allDay=t.event.allDay,defaultEvents[e].className=t.event.classNames[0],defaultEvents[e].description=t.event._def.extendedProps.description||"",defaultEvents[e].location=t.event._def.extendedProps.location||"")}});function changeLocale(){var e=document.getElementById("locale-select").value;calendar.setOption("locale",e)}function changeDirection(){var e=document.getElementById("direction-select").value;calendar.setOption("direction",e)}function flatPickrInit(){var e={enableTime:!0,noCalendar:!0};flatpickr(start_date,{enableTime:!1,mode:"range",minDate:"today",onChange:function(e,t,n){1<t.split("to").length?document.getElementById("event-time").setAttribute("hidden",!0):(document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-time").removeAttribute("hidden"))}});flatpickr(timepicker1,e),flatpickr(timepicker2,e)}function flatpicekrValueClear(){start_date.flatpickr().clear(),timepicker1.flatpickr().clear(),timepicker2.flatpickr().clear()}function eventClicked(){document.getElementById("form-event").classList.add("view-event"),document.getElementById("event-title").classList.replace("d-block","d-none"),document.getElementById("event-category").classList.replace("d-block","d-none"),document.getElementById("event-start-date").parentNode.classList.add("d-none"),document.getElementById("event-start-date").classList.replace("d-block","d-none"),document.getElementById("event-time").setAttribute("hidden",!0),document.getElementById("timepicker1").parentNode.classList.add("d-none"),document.getElementById("timepicker1").classList.replace("d-block","d-none"),document.getElementById("timepicker2").parentNode.classList.add("d-none"),document.getElementById("timepicker2").classList.replace("d-block","d-none"),document.getElementById("event-location").classList.replace("d-block","d-none"),document.getElementById("event-description").classList.replace("d-block","d-none"),document.getElementById("event-start-date-tag").classList.replace("d-none","d-block"),document.getElementById("event-timepicker1-tag").classList.replace("d-none","d-block"),document.getElementById("event-timepicker2-tag").classList.replace("d-none","d-block"),document.getElementById("event-location-tag").classList.replace("d-none","d-block"),document.getElementById("event-description-tag").classList.replace("d-none","d-block"),document.getElementById("btn-save-event").setAttribute("hidden",!0)}function editEvent(e){var t=e.getAttribute("data-id");("new-event"==t?(document.getElementById("modal-title").innerHTML="",document.getElementById("modal-title").innerHTML="Add Event",document.getElementById("btn-save-event").innerHTML="Add Event",eventTyped):"edit-event"==t?(e.innerHTML="Cancel",e.setAttribute("data-id","cancel-event"),document.getElementById("btn-save-event").innerHTML="Update Event",e.removeAttribute("hidden"),eventTyped):(e.innerHTML="Edit",e.setAttribute("data-id","edit-event"),eventClicked))()}function eventTyped(){document.getElementById("form-event").classList.remove("view-event"),document.getElementById("event-title").classList.replace("d-none","d-block"),document.getElementById("event-category").classList.replace("d-none","d-block"),document.getElementById("event-start-date").parentNode.classList.remove("d-none"),document.getElementById("event-start-date").classList.replace("d-none","d-block"),document.getElementById("timepicker1").parentNode.classList.remove("d-none"),document.getElementById("timepicker1").classList.replace("d-none","d-block"),document.getElementById("timepicker2").parentNode.classList.remove("d-none"),document.getElementById("timepicker2").classList.replace("d-none","d-block"),document.getElementById("event-location").classList.replace("d-none","d-block"),document.getElementById("event-description").classList.replace("d-none","d-block"),document.getElementById("event-start-date-tag").classList.replace("d-block","d-none"),document.getElementById("event-timepicker1-tag").classList.replace("d-block","d-none"),document.getElementById("event-timepicker2-tag").classList.replace("d-block","d-none"),document.getElementById("event-location-tag").classList.replace("d-block","d-none"),document.getElementById("event-description-tag").classList.replace("d-block","d-none"),document.getElementById("btn-save-event").removeAttribute("hidden")}function getTime(e){if(null!=(e=new Date(e)).getHours())return e.getHours()+":"+(e.getMinutes()?e.getMinutes():0)}function tConvert(e){var e=e.split(":"),t=e[0],e=e[1],n=12<=t?"PM":"AM";return(t=(t%=12)||12)+":"+(e<10?"0"+e:e)+" "+n}setTimeout(()=>{calendar.render()},0),formEvent.addEventListener("submit",function(e){e.preventDefault();var t,n,e=document.getElementById("event-title").value,d=document.getElementById("event-category").value,a=document.getElementById("event-start-date").value.split("to"),l=new Date(a[0].trim()),i=a[1]?new Date(a[1].trim()):"",c=null,o=document.getElementById("event-location").value,r=document.getElementById("event-description").value,s=document.getElementById("eventid").value,m=!1,u=(1<a.length?((c=new Date(a[1])).setDate(c.getDate()+1),a=new Date(a[0]),m=!0):(t=a,u=document.getElementById("timepicker1").value.trim(),n=document.getElementById("timepicker2").value.trim(),a=new Date(a+"T"+u),c=new Date(t+"T"+n)),defaultEvents.length+1);!1===forms[0].checkValidity()?forms[0].classList.add("was-validated"):(selectedEvent?(selectedEvent.setProp("id",s),selectedEvent.setProp("title",e),selectedEvent.setProp("classNames",[d]),selectedEvent.setStart(l),selectedEvent.setEnd(i),selectedEvent.setAllDay(m),selectedEvent.setExtendedProp("description",r),selectedEvent.setExtendedProp("location",o),t=defaultEvents.findIndex(function(e){return e.id==selectedEvent.id}),defaultEvents[t]&&(defaultEvents[t].title=e,defaultEvents[t].start=l,defaultEvents[t].end=i,defaultEvents[t].allDay=m,defaultEvents[t].className=d,defaultEvents[t].description=r,defaultEvents[t].location=o),calendar.render()):(calendar.addEvent(n={id:u,title:e,start:a,end:c,allDay:m,className:d,description:r,location:o}),defaultEvents.push(n)),addEvent.hide())}),document.getElementById("btn-delete-event").addEventListener("click",function(e){if(selectedEvent){for(var t=0;t<defaultEvents.length;t++)defaultEvents[t].id==selectedEvent.id&&(defaultEvents.splice(t,1),t--);selectedEvent.remove(),selectedEvent=null,addEvent.hide()}}),document.getElementById("btn-new-event").addEventListener("click",function(e){flatpicekrValueClear(),flatPickrInit(),addNewEvent(),document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)});var str_dt=function(e){var e=new Date(e),t=""+["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],n=""+e.getDate(),e=e.getFullYear();return t.length<2&&(t="0"+t),[(n=n.length<2?"0"+n:n)+" "+t,e].join(",")};const selectAll=document.querySelector(".select-all"),filterInput=[].slice.call(document.querySelectorAll(".input-filter"));function selectedCalendars(){let t=[],e=[].slice.call(document.querySelectorAll(".input-filter:checked"));return e.forEach(e=>{t.push(e.getAttribute("data-value"))}),t}function fetchEvents(e,t){let n=selectedCalendars();t(defaultEvents.filter(function(e){return n.includes(e.extendedProps.category.toLowerCase())}))}selectAll&&selectAll.addEventListener("click",e=>{e.currentTarget.checked?document.querySelectorAll(".input-filter").forEach(e=>e.checked=1):document.querySelectorAll(".input-filter").forEach(e=>e.checked=0),calendar.refetchEvents()}),filterInput&&filterInput.forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".input-filter:checked").length<document.querySelectorAll(".input-filter").length?selectAll.checked=!1:selectAll.checked=!0,calendar.refetchEvents()})});